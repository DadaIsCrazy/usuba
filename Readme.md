Usuba
===
 
Usuba is a programming language to write bitsliced code. It compiles
optimized to C code (+ intrinsics).

---

## A few examples

A few examples of Usuba codes:
 * [bitslice DES](samples/usuba/des.ua) (and the generated [C code](samples/C/des.c)),
 * [bitslice AES](samples/usuba/aes.ua) (and the generated [C code](samples/C/aes.c)),
 * [Hslice AES](samples/usuba/aes_mslice.ua) (and the generated [C code](samples/C/aes_mslice.c)),
 * [Vslice Serpent](samples/usuba/serpent.ua) (and the generated [C code](samples/C/serpent.c)),
 * [Vslice Chacha20](samples/usuba/chacha20.ua) (and the
   generated [C code](samples/C/chacha20.c)).


If you are familiar with Perl, an easy way to see the compiler an
action is to look at the scripts in the
directory [checks/correctness](checks/correctness) that compile a few
Usuba codes, run them and make sure they produce the expected results.


## Compiling

To compile an Usuba file (`.ua`), you need to be in usuba directory
(due to poor design, but it won't be the case anymore once we'll have
packaged Usuba), and then invoke `./usubac <options> <source.ua>` (the 
Usuba source file must be the last argument).  
The option `-no-arr-entry` might also be usefull for small functions
(combined with `-no-arr`).  
The list of flags can be obtained by running `./usubac -help`.  

The C code generated by Usuba uses macros to achieve genericity. This
macros are loaded with the instruction `#include "XXX.h"` at the
begining of the C files generated, where `XXX` is one of `STD`, `SSE`,
`AVX` (which should be `AVX2`), `AVX512`, `Neon`, `AltiVec`. Those
headers are located in the directory [arch](arch).
